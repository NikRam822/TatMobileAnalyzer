# Правила GitHub Workflow

Перед тем как внести изменения в главную ветку `master`, необходимо пройти через следующие шаги:
1. Создать новую ветку, перед этим посмотри правило [**наименование ветки**](#branch-naming).
2. Создать pull request (PR) в главную ветку, в github это делается [**так**](#pull-request).
3. Начать следить за PR (посмотри для каких [**случаев**](#tracking), какие варианты подойдут): 
   - прикрепить PR к существующему issue, 
   - или создать issue и потом прикрепить PR к issue, 
   - либо добавить PR в github project, 
   - или же создать github issue, добавить PR в github project и прикрепить его к issue.
4. Добавить изменения\коммиты.
5. Запросить [ревью](https://docs.github.com/ru/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/requesting-a-pull-request-review) от разработчиков.
6. После ревью поменять названия и сообщение mergе.
7. Проверь merge по пунктам: [**проверка merge**](#merge-check).
8. Сгруппировать все коммиты (squash commits) и сделать merge.
9. Проверить, что все [**завершено**](#done).

## Наименование ветки <a name="branch-naming"></a>

Новые ветки следуют называть по следующей схеме: `{noun}/{verb_or_noun}`. Таким образом, 
ветви для документации должны быть названы с префиксом `document` и кратким описанием изменения, разделенным дефисом.
Пример: `document/change-srs` значит изменить specification документ. На данный момент выделены
следующие префиксы: `feature`, `fix`, и `document`.

## Создание pull request <a name="pull-request"></a>

С новой ветки необходимо создать PR, чтобы другие разработчики знали, над какими задачами
ведется работа. Создать PR можно [так](https://docs.github.com/ru/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request).

- В заголовке PR должно быть краткое описание планируемых изменения.
- В описании PR необходимо подробно описать планируемые изменения и их цель.

## Мониторинг pull request <a name="tracking"></a>

Наша команда использует github projects для мониторинга всех задач. Поэтому нам важно, чтобы
работа с кодом была видна у нас на доске. Мы используем issues для обозначения задач связанных с кодом, issues
могут быть маленькими (small task) и большими (epic). Поэтому для мониторинга PR описаны четыре сценария. 
С правилами работы в нашем github projects можно ознакомиться [здесь]().

#### 1. Прикрепить PR к существующему issue.
    
Если вы хотите закрыть существующий issue, который не является epic (то есть, задача не имеет подзадач), 
то вам необходимо привязать PR к существующему issue.

#### 2. Создать issue и потом прикрепить PR к issue.

Если вы хотите добавить изменение, которое не представлено в issues, то создайте новую задачу в github project, 
после конвертируйте его в issue. Дальше по инструкции выше прикрепите PR к issue.

Также возможен другой вариант, он описан ниже.

#### 3. Добавить PR в github project.

Если вы хотите добавить изменение, которое не представлено в issues, то добавьте PR в github projects. GitHub projects
потом сам добавит PR на доску задач.

#### 4. Создать github issue, добавить PR в github project и прикрепить его к issue.

Если вы хотите добавить изменение, которое не представлено в issues, и которое будет частью чего-то большого (модуля, 
epicа), то создайте issue с описанием глобальной задачи (создать модуль, заимлепентировать epic). После прикрепляйте 
свои будущие задачи в виде PR к новому issue.


Важно: при создании PR, закрывающего ранее созданное issue, добавьте ссылку на этот 
issue в описании PR (Например: `Closes #123` или `Fixes: #123`).

## Проверка merge <a name="merge-check"></a>

Перед merge необходимо выполнить следующие пункты:
- получить approve от двух разработчиков,
- проверить merge название на соответствие с форматом `{Verb} {object} {desc}`, где в `desc` содержит информацию по 
issue (`Fixes #123`), который этот merge закрывает. 

## Завершение <a name="done"></a>

В конце следует проверить:
- issue закрыт,
- PR закрыт,
- issue завершен в project.
